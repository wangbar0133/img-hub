# ğŸ“¸ ImgHub - çº¯ç²¹æ‘„å½±ä½œå“å±•ç¤ºå¹³å°

ä¸€ä¸ªä¸“æ³¨äºæ‘„å½±ä½œå“å±•ç¤ºçš„ç°ä»£åŒ–ç½‘ç«™ï¼Œä½¿ç”¨ Next.js + Docker æ„å»ºï¼Œæä¾›æ²‰æµ¸å¼çš„è§†è§‰ä½“éªŒã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ¨ **æç®€è®¾è®¡** - ä¸“æ³¨ä½œå“å±•ç¤ºçš„çº¯å‡€ç•Œé¢
- ğŸ“± **å®Œç¾é€‚é…** - æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯å“åº”å¼ä½“éªŒ
- ğŸ“š **å½±é›†ä½“ç³»** - å±‚çº§åŒ–çš„ä½œå“ç»„ç»‡æ–¹å¼
- ğŸ–¼ï¸ **æ²‰æµ¸ä½“éªŒ** - å…¨å±æ— å¹²æ‰°çš„ä½œå“æµè§ˆ
- ğŸ’« **æµç•…åŠ¨ç”»** - ç»†è…»çš„äº¤äº’åŠ¨ç”»æ•ˆæœ
- âš¡ **æ€§èƒ½ä¼˜åŒ–** - å¤šå±‚å›¾ç‰‡ä¼˜åŒ–ç­–ç•¥
- ğŸ³ **ä¸€é”®éƒ¨ç½²** - Docker å®¹å™¨åŒ–éƒ¨ç½²
- ğŸ” **SEO ä¼˜åŒ–** - é™æ€ç”Ÿæˆ + å…ƒæ•°æ®ä¼˜åŒ–

## ğŸ—ï¸ ç½‘ç«™æ¶æ„

### é¡µé¢ç»“æ„
```
é¦–é¡µ (Hero + ç²¾é€‰å½±é›†)
â”œâ”€â”€ å½±é›†åˆ—è¡¨é¡µ (/albums)
â”‚   â”œâ”€â”€ æ—…è¡Œæ‘„å½± (/albums?category=travel)
â”‚   â””â”€â”€ Cosplayæ‘„å½± (/albums?category=cosplay)
â”œâ”€â”€ å½±é›†è¯¦æƒ…é¡µ (/albums/[albumId])
â”‚   â””â”€â”€ ç…§ç‰‡è¯¦æƒ…é¡µ (/albums/[albumId]/photos/[photoId])
â”‚       â””â”€â”€ å…¨å±æŸ¥çœ‹æ¨¡å¼
```

### å›¾ç‰‡ä½“ç³»
```
å››å±‚å›¾ç‰‡ç»“æ„ï¼š
â”œâ”€â”€ thumbnail (400px)    - å½±é›†åˆ—è¡¨ç¼©ç•¥å›¾
â”œâ”€â”€ src (800px)         - å½±é›†è¯¦æƒ…å±•ç¤ºå›¾
â”œâ”€â”€ detailSrc (900px)   - ç…§ç‰‡è¯¦æƒ…é¡µå›¾ç‰‡
â””â”€â”€ originalSrc (åŸå°ºå¯¸) - å…¨å±æŸ¥çœ‹åŸå›¾
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: Next.js 14 (App Router) + TypeScript
- **æ ·å¼ç³»ç»Ÿ**: Tailwind CSS + è‡ªå®šä¹‰åŠ¨ç”»
- **äº¤äº’æ•ˆæœ**: Framer Motion
- **å›¾æ ‡ç³»ç»Ÿ**: Lucide React
- **éƒ¨ç½²æ–¹æ¡ˆ**: Docker + Docker Compose + Nginx
- **å›¾ç‰‡ç®¡ç†**: ImageMagick + è‡ªåŠ¨åŒ–è„šæœ¬

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 18+
- Docker & Docker Compose
- ImageMagick (å›¾ç‰‡å¤„ç†)

### æœ¬åœ°å¼€å‘

```bash
# å…‹éš†é¡¹ç›®
git clone <your-repo-url>
cd img-hub

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# è®¿é—® http://localhost:3000
```

### Docker éƒ¨ç½²

```bash
# ä¸€é”®å¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f img-hub

# åœæ­¢æœåŠ¡
docker-compose down
```

## ğŸ³ Docker éƒ¨ç½²

### é•œåƒæ„å»ºç­–ç•¥
æœ¬é¡¹ç›®é‡‡ç”¨**æ•°æ®ä¸åº”ç”¨åˆ†ç¦»**çš„éƒ¨ç½²ç­–ç•¥ï¼š

- âœ… **é•œåƒç²¾ç®€**ï¼šé•œåƒä¸åŒ…å«ä»»ä½•å›¾ç‰‡æˆ–æ•°æ®æ–‡ä»¶
- âœ… **å®Œå…¨æŒ‚è½½**ï¼šæ‰€æœ‰èµ„æºé€šè¿‡DockeræŒ‚è½½æä¾›
- âœ… **é›¶å†²çª**ï¼šé¿å…å†…ç½®æ–‡ä»¶ä¸æŒ‚è½½æ–‡ä»¶å†²çª
- âœ… **åŠ¨æ€æ›´æ–°**ï¼šå›¾ç‰‡ä¸Šä¼ ç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡å»ºé•œåƒ

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒï¼ˆä¸åŒ…å«publicç›®å½•æ•°æ®ï¼‰
docker build -t img-hub .

# è¿è¡Œå®¹å™¨ï¼ˆæŒ‚è½½æœ¬åœ°æ•°æ®ï¼‰
docker-compose up -d

# éªŒè¯æŒ‚è½½
docker exec img-hub-app ls -la /usr/share/nginx/html/public/
```

### é•œåƒç»“æ„
```
/usr/share/nginx/html/
â”œâ”€â”€ _next/          # Next.js é™æ€èµ„æº
â”œâ”€â”€ albums/         # å½±é›†é¡µé¢
â”œâ”€â”€ index.html      # é¦–é¡µ
â””â”€â”€ public/         # ç©ºç›®å½•ç»“æ„ï¼ˆç­‰å¾…æŒ‚è½½ï¼‰
    â”œâ”€â”€ albums.json # ç©ºæ–‡ä»¶ï¼ˆè¢«æŒ‚è½½è¦†ç›–ï¼‰
    â””â”€â”€ images/     # ç©ºç›®å½•ï¼ˆè¢«æŒ‚è½½è¦†ç›–ï¼‰
```

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
img-hub/
â”œâ”€â”€ app/                     # Next.js App Router
â”‚   â”œâ”€â”€ layout.tsx          # å…¨å±€å¸ƒå±€ï¼ˆHeader + Footerï¼‰
â”‚   â”œâ”€â”€ page.tsx            # é¦–é¡µï¼ˆHero + ç²¾é€‰å½±é›†ï¼‰
â”‚   â”œâ”€â”€ albums/             # å½±é›†è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ page.tsx        # å½±é›†åˆ—è¡¨é¡µ
â”‚   â”‚   â”œâ”€â”€ layout.tsx      # å½±é›†é¡µé¢å¸ƒå±€
â”‚   â”‚   â””â”€â”€ [albumId]/      # åŠ¨æ€è·¯ç”±
â”‚   â”‚       â”œâ”€â”€ page.tsx    # å½±é›†è¯¦æƒ…é¡µï¼ˆæœåŠ¡ç«¯ï¼‰
â”‚   â”‚       â”œâ”€â”€ AlbumDetailClient.tsx  # å½±é›†è¯¦æƒ…ï¼ˆå®¢æˆ·ç«¯ï¼‰
â”‚   â”‚       â””â”€â”€ photos/[photoId]/
â”‚   â”‚           â”œâ”€â”€ page.tsx           # ç…§ç‰‡è¯¦æƒ…é¡µï¼ˆæœåŠ¡ç«¯ï¼‰
â”‚   â”‚           â””â”€â”€ PhotoDetailClient.tsx  # ç…§ç‰‡è¯¦æƒ…ï¼ˆå®¢æˆ·ç«¯ï¼‰
â”‚   â””â”€â”€ globals.css         # å…¨å±€æ ·å¼ + è‡ªå®šä¹‰åŠ¨ç”»
â”œâ”€â”€ components/             # æ ¸å¿ƒç»„ä»¶
â”‚   â”œâ”€â”€ Header.tsx          # æ™ºèƒ½å¯¼èˆªæ 
â”‚   â”œâ”€â”€ Footer.tsx          # ä½œå“å¯¼å‘é¡µè„š
â”‚   â”œâ”€â”€ AlbumGrid.tsx       # å½±é›†ç½‘æ ¼å±•ç¤º
â”‚   â””â”€â”€ FullScreenModal.tsx # å…¨å±å›¾ç‰‡æŸ¥çœ‹å™¨
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ albums.ts             # å½±é›†æ•°æ®æ¥å£
â”‚   â””â”€â”€ albums.json           # å½±é›†æ•°æ®æ–‡ä»¶
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts            # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ img-manager.sh        # ç»Ÿä¸€å›¾ç‰‡ç®¡ç†è„šæœ¬
â”œâ”€â”€ public/images/          # æœ¬åœ°å›¾ç‰‡å­˜å‚¨
â”‚   â”œâ”€â”€ travel/             # æ—…è¡Œæ‘„å½±
â”‚   â”œâ”€â”€ cosplay/            # Cosplayæ‘„å½±
â”‚   â”œâ”€â”€ detail/             # 900p è¯¦æƒ…å›¾
â”‚   â”œâ”€â”€ thumbnails/         # 400p ç¼©ç•¥å›¾
â”‚   â””â”€â”€ original/           # åŸå§‹å›¾ç‰‡å¤‡ä»½
â”œâ”€â”€ Dockerfile              # å¤šé˜¶æ®µæ„å»ºé…ç½®
â”œâ”€â”€ docker-compose.yml      # å®¹å™¨ç¼–æ’ + æ•°æ®å·
â”œâ”€â”€ nginx.conf              # é«˜æ€§èƒ½WebæœåŠ¡é…ç½®
â””â”€â”€ next.config.js          # é™æ€å¯¼å‡º + ä¼˜åŒ–é…ç½®
```

### å†…å®¹ç®¡ç†

æœ¬é¡¹ç›®æä¾›äº†è‡ªåŠ¨åŒ–çš„å†…å®¹ç®¡ç†å·¥å…·ï¼š

#### `albums.ts` æ•°æ®æ¥å£
```typescript
// data/albums.ts - å½±é›†æ•°æ®æ¥å£
import albumsData from '../public/albums.json'
export const sampleAlbums: Album[] = albumsData
```

#### `albums.json` æ•°æ®æ–‡ä»¶
ä½ç½®ï¼š`public/albums.json`
- å­˜å‚¨æ‰€æœ‰å½±é›†å’Œç…§ç‰‡çš„ç»“æ„åŒ–æ•°æ®
- åŒ…å«EXIFä¿¡æ¯ã€åˆ†ç±»ã€æ ‡ç­¾ç­‰å…ƒæ•°æ®
- é€šè¿‡DockeræŒ‚è½½è‡ªåŠ¨åŒæ­¥åˆ°æœåŠ¡å™¨

#### å›¾ç‰‡ç®¡ç†è„šæœ¬
**Pythonç‰ˆæœ¬ï¼ˆæ¨èï¼‰ï¼š** `scripts/img-manager.py`
- è‡ªåŠ¨å¤„ç†å›¾ç‰‡ï¼ˆå››å±‚å°ºå¯¸ä¼˜åŒ–ï¼‰
- åŸå›¾æ— æŸä¿å­˜ï¼ˆ100%è´¨é‡ï¼‰
- è‡ªåŠ¨æ›´æ–° `public/albums.json`
- äº¤äº’å¼æ“ä½œç•Œé¢
- **ğŸ†• ä¸€é”®ECSéƒ¨ç½²åŠŸèƒ½**

**ä½¿ç”¨æ–¹æ³•**:
```bash
# æœ¬åœ°å›¾ç‰‡å¤„ç†å’Œæµ‹è¯•ï¼ˆæ”¯æŒECSä¸Šä¼ ï¼‰
python3 scripts/img-manager.py local-test

# ä¸€é”®éƒ¨ç½²åˆ°ECS
python3 scripts/img-manager.py deploy

# é…ç½®ECSè¿æ¥ä¿¡æ¯  
python3 scripts/img-manager.py ecs-config

# æŸ¥çœ‹æ•°æ®çŠ¶æ€
python3 scripts/img-manager.py status

# å¯åŠ¨æœ¬åœ°é¢„è§ˆ
python3 scripts/img-manager.py local-preview
```

**å·¥ä½œæµç¨‹**:
1. `local-test` - å¤„ç†å›¾ç‰‡åè¯¢é—®æ˜¯å¦ä¸Šä¼ ECS
2. `deploy` - ç‹¬ç«‹æ‰§è¡ŒECSéƒ¨ç½²

**æ³¨æ„**: ~~æ—§çš„ `img-manager.sh` å·²åºŸå¼ƒ~~ï¼ŒPythonç‰ˆæœ¬ç°å·²é›†æˆECSéƒ¨ç½²åŠŸèƒ½ã€‚

### å›¾ç‰‡ä¼˜åŒ–è®¾ç½®

è„šæœ¬å†…ç½®çš„å›¾ç‰‡å¤„ç†å‚æ•°ï¼š

```bash
THUMBNAIL_SIZE="400"     # ç¼©ç•¥å›¾å°ºå¯¸
DISPLAY_SIZE="800"       # å±•ç¤ºå›¾å°ºå¯¸  
DETAIL_SIZE="900"        # è¯¦æƒ…é¡µå°ºå¯¸
THUMBNAIL_QUALITY="75"   # ç¼©ç•¥å›¾è´¨é‡
DISPLAY_QUALITY="85"     # å±•ç¤ºå›¾è´¨é‡
DETAIL_QUALITY="90"      # è¯¦æƒ…å›¾è´¨é‡
```

## ğŸ”§ ECS éƒ¨ç½²æŒ‡å—

### 1. æœåŠ¡å™¨å‡†å¤‡

```bash
# å®‰è£… Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# å®‰è£… Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯
sudo systemctl start docker
sudo systemctl enable docker
```

### 2. é¡¹ç›®éƒ¨ç½²

```bash
# æœ¬åœ°å‡†å¤‡å›¾ç‰‡ï¼ˆä½¿ç”¨ç»Ÿä¸€è„šæœ¬ï¼‰
./scripts/img-manager.sh upload ./my-photos/

# ä¸Šä¼ é¡¹ç›®æ–‡ä»¶
scp -r img-hub/ user@ecs-ip:/home/user/

# ç™»å½•æœåŠ¡å™¨
ssh user@ecs-ip

# å¯åŠ¨æœåŠ¡
cd img-hub
docker-compose up -d

# é…ç½®é˜²ç«å¢™
sudo ufw allow 80
sudo ufw allow 443
```

### 3. SSL é…ç½®ï¼ˆå¯é€‰ï¼‰

```bash
# å®‰è£… Certbot
sudo apt install certbot python3-certbot-nginx

# ç”³è¯·è¯ä¹¦
sudo certbot --nginx -d your-domain.com

# è®¾ç½®è‡ªåŠ¨ç»­æœŸ
echo "0 12 * * * /usr/bin/certbot renew --quiet" | sudo crontab -
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### å›¾ç‰‡ä¼˜åŒ–ç­–ç•¥

1. **å››å±‚å›¾ç‰‡æ¶æ„** - æ ¹æ®ä½¿ç”¨åœºæ™¯åŠ è½½ä¸åŒå°ºå¯¸
2. **WebP æ ¼å¼æ”¯æŒ** - ç°ä»£æµè§ˆå™¨è‡ªåŠ¨ä¼˜åŒ–
3. **Nginx ç¼“å­˜** - é™æ€èµ„æºé•¿æœŸç¼“å­˜
4. **æ‡’åŠ è½½** - è§†çª—å†…å›¾ç‰‡æŒ‰éœ€åŠ è½½

### ç¼“å­˜é…ç½®

Nginx è‡ªåŠ¨é…ç½®ï¼š
- å›¾ç‰‡æ–‡ä»¶ï¼š1å¹´ç¼“å­˜
- é™æ€èµ„æºï¼š1ä¸ªæœˆç¼“å­˜  
- HTMLæ–‡ä»¶ï¼šæ— ç¼“å­˜
- Gzip å‹ç¼©ï¼šè‡ªåŠ¨å¯ç”¨

### ç›‘æ§æŒ‡æ ‡

```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker stats

# æŸ¥çœ‹è®¿é—®æ—¥å¿—
docker-compose logs nginx

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
df -h

# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h
```

## ğŸ¯ æœ€ä½³å®è·µ

### å›¾ç‰‡ç®¡ç†
- ğŸ“ **ç»Ÿä¸€å°ºå¯¸**: ä½¿ç”¨è„šæœ¬ç¡®ä¿å›¾ç‰‡å°ºå¯¸ä¸€è‡´
- ğŸ—œï¸ **é€‚åº¦å‹ç¼©**: å¹³è¡¡è´¨é‡ä¸æ–‡ä»¶å¤§å°
- ğŸ·ï¸ **æ ‡å‡†å‘½å**: ä½¿ç”¨æœ‰æ„ä¹‰çš„æ–‡ä»¶å
- ğŸ’¾ **å®šæœŸå¤‡ä»½**: åŸå›¾ä¿å­˜åœ¨äº‘å­˜å‚¨

### å†…å®¹ç»„ç»‡
- ğŸ“š **ç²¾é€‰å½±é›†**: é¦–é¡µåªå±•ç¤ºæœ€ä½³ä½œå“
- ğŸ·ï¸ **å‡†ç¡®åˆ†ç±»**: travel/cosplay æ˜ç¡®åˆ’åˆ†
- ğŸ“ **ä¼˜è´¨æè¿°**: ç®€æ´æœ‰åŠ›çš„ä½œå“æè¿°
- ğŸ”„ **æŒç»­æ›´æ–°**: å®šæœŸæ·»åŠ æ–°ä½œå“

### æ€§èƒ½ä¼˜åŒ–
- âš¡ **CDN åŠ é€Ÿ**: é…ç½®å›¾ç‰‡CDNåˆ†å‘
- ğŸ“± **ç§»åŠ¨ä¼˜å…ˆ**: ä¼˜å…ˆä¼˜åŒ–ç§»åŠ¨ç«¯ä½“éªŒ
- ğŸ” **SEO å‹å¥½**: å®Œå–„å›¾ç‰‡ alt å±æ€§
- ğŸ“Š **æ•°æ®åˆ†æ**: ç›‘æ§ç”¨æˆ·è®¿é—®è¡Œä¸º

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**å›¾ç‰‡ä¸æ˜¾ç¤º**
```bash
# æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la public/images/
chmod 755 public/images/
chmod 644 public/images/**/*

# æ£€æŸ¥å®¹å™¨æŒ‚è½½
docker inspect img-hub_img-hub_1 | grep Mounts
```

**æœåŠ¡æ— æ³•å¯åŠ¨**
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
sudo netstat -tlnp | grep :80

# æ£€æŸ¥ Docker æœåŠ¡
sudo systemctl status docker

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker-compose logs
```

**å†…å­˜ä¸è¶³**
```bash
# æ¸…ç† Docker ç¼“å­˜
docker system prune -a

# æŸ¥çœ‹ç£ç›˜ç©ºé—´
df -h

# é‡å¯æœåŠ¡
docker-compose restart
```

## ğŸ“ˆ æ‰©å±•åŠŸèƒ½

### è®¡åˆ’ä¸­çš„åŠŸèƒ½
- ğŸ” **ç®¡ç†åå°** - åœ¨çº¿å›¾ç‰‡ç®¡ç†
- ğŸ“Š **è®¿é—®ç»Ÿè®¡** - ä½œå“æµè§ˆæ•°æ®
- ğŸ’¬ **è¯„è®ºç³»ç»Ÿ** - ä½œå“äº’åŠ¨åŠŸèƒ½
- ğŸ” **æœç´¢åŠŸèƒ½** - å…¨ç«™å†…å®¹æœç´¢
- ğŸŒ **å¤šè¯­è¨€** - å›½é™…åŒ–æ”¯æŒ

### æŠ€æœ¯å‡çº§
- âš¡ **Edge Runtime** - è¾¹ç¼˜è®¡ç®—ä¼˜åŒ–
- ğŸ¨ **AI æ ‡ç­¾** - æ™ºèƒ½å›¾ç‰‡æ ‡æ³¨
- ğŸ“± **PWA æ”¯æŒ** - æ¸è¿›å¼Webåº”ç”¨
- ğŸ”„ **å®æ—¶åŒæ­¥** - äº‘ç«¯è‡ªåŠ¨åŒæ­¥

## ğŸ“„ è®¸å¯è¯

MIT License - è‡ªç”±ä½¿ç”¨å’Œä¿®æ”¹

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issues å’Œ Pull Requestsï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. å¼€å¯ Pull Request

---

**ImgHub** - è®©æ¯ä¸€å¼ ç…§ç‰‡éƒ½æœ‰è¢«æ¬£èµçš„æœºä¼š ğŸ“¸âœ¨

